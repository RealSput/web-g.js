!function(global){let explicit={},extract=t=>{for(let e in t)global[e]=t[e]},find_context=t=>{for(let e in contexts)if(contexts[e].group.value==t.value)return contexts[e]},spawn_trigger=(t,e=0)=>({OBJ_ID:1268,SPAWN_DURATION:e,TARGET:t}),writeClasses=arr=>{arr.forEach(class_=>{let clases=class_.split("/"),clas=clases.shift();clases.forEach(t=>{explicit[t]=clas}),"group"==clas?eval(`class $${clas} {\n        constructor(a) {\n          this.value = a;\n          this.type = '${clas}';\n        }\n        move(x, y, duration = 0, easing = NONE, easing_rate = 2, x_multiplier = 1, y_multiplier = 1, multiply = true, delay_trig = true) {\n              $.add({\n                  OBJ_ID: 901,\n                  TARGET: this,\n                  MOVE_X: multiply ? x * 3 * x_multiplier : x,\n                  MOVE_Y: multiply ? y * 3 * y_multiplier : y,\n                  DURATION: duration,\n                  EASING: easing,\n                  EASING_RATE: easing_rate,\n              })\n              if (delay_trig) wait(duration);\n        }\n        call(delay = 0) {\n          $.add(spawn_trigger(this, delay))\n        }\n        \n        alpha(opacity = 1, duration = 0) {\n           $.add({\n               OBJ_ID: 1007,\n               TARGET: this,\n               OPACITY: opacity,\n               DURATION: duration,\n           })\n           wait(duration)\n       }\n\n       lock_to_player(lock_x = true, lock_y = true, duration = 999) {\n        $.add({\n            OBJ_ID: 901,\n            TARGET: this,\n            DURATION: duration,\n            LOCK_TO_PLAYER_X: lock_x,\n            LOCK_TO_PLAYER_Y: lock_y,\n        })\n      }\n\n        follow_player_y(speed = 1, delay = 0, offset = 0, max_speed = 0, duration = 999) {\n        $.add({\n            OBJ_ID: 1814,\n            SPEED : speed,\n            DELAY : delay,\n            Y_OFFSET : offset,\n            MAX_SPEED : max_speed,\n            TARGET: this,\n            DURATION: duration,\n        })\n    }\n\n      }\n      global['${clas}'] = (x) => new $${clas}(x)`):"color"==clas?eval(`class $${clas} {\n      constructor(a) {\n        this.value = a;\n        this.type = '${clas}';\n      }\n      set(c, duration = 0, blending = false) {\n        $.add({\n          OBJ_ID: 899,\n          DURATION: duration,\n          TRIGGER_RED: c[0],\n          TRIGGER_GREEN: c[1],\n          TRIGGER_BLUE: c[2],\n          OPACITY: c[3] || 1,\n          BLENDING: blending,\n          TARGET_COLOR: this,\n          ACTIVE_TRIGGER: true,\n        })\n        wait(duration)\n      }\n    }\n    global['${clas}'] = (x) => new $${clas}(x)`):eval(`class $${clas} {\n      constructor(a) {\n        this.value = a;\n        this.type = '${clas}';\n      }\n    }\n    global['${clas}'] = (x) => new $${clas}(x)`)})};writeClasses(["group/TARGET/GROUPS","color/TARGET_COLOR/COLOR/COLOR_2","block/BLOCK_A/BLOCK_B"]);let d={1:"OBJ_ID",2:"X",3:"Y",4:"HORIZONTAL_FLIP",5:"VERTICAL_FLIP",6:"ROTATION",7:"TRIGGER_RED",8:"TRIGGER_GREEN",9:"TRIGGER_BLUE",10:"DURATION",11:"TOUCH_TRIGGERED",13:"PORTAL_CHECKED",15:"PLAYER_COLOR_1",16:"PLAYER_COLOR_2",17:"BLENDING",20:"EDITOR_LAYER_1",21:"COLOR",22:"COLOR_2",23:"TARGET_COLOR",24:"Z_LAYER",25:"Z_ORDER",28:"MOVE_X",29:"MOVE_Y",30:"EASING",31:"TEXT",32:"SCALING",34:"GROUP_PARENT",35:"OPACITY",36:"ACTIVE_TRIGGER",41:"HVS_ENABLED",42:"COLOR_2_HVS_ENABLED",43:"HVS",44:"COLOR_2_HVS",45:"FADE_IN",46:"HOLD",47:"FADE_OUT",48:"PULSE_HSV",49:"COPIED_COLOR_HVS",50:"COPIED_COLOR_ID",51:"TARGET",52:"TARGET_TYPE",54:"YELLOW_TELEPORTATION_PORTAL_DISTANCE",56:"ACTIVATE_GROUP",57:"GROUPS",58:"LOCK_TO_PLAYER_X",59:"LOCK_TO_PLAYER_Y",60:"COPY_OPACITY",61:"EDITOR_LAYER_2",62:"SPAWN_TRIGGERED",63:"SPAWN_DURATION",64:"DONT_FADE",65:"MAIN_ONLY",66:"DETAIL_ONLY",67:"DONT_ENTER",68:"ROTATE_DEGREES",69:"TIMES_360",70:"LOCK_OBJECT_ROTATION",71:"TARGET_POS",72:"X_MOD",73:"Y_MOD",75:"STRENGTH",76:"ANIMATION_ID",77:"COUNT",78:"SUBTRACT_COUNT",79:"PICKUP_MODE",80:"ITEM",696969:"BLOCK_A",81:"HOLD_MODE",82:"TOGGLE_MODE",84:"INTERVAL",85:"EASING_RATE",86:"EXCLUSIVE",87:"MULTI_TRIGGER",88:"COMPARISON",89:"DUAL_MODE",90:"SPEED",91:"DELAY",92:"Y_OFFSET",93:"ACTIVATE_ON_EXIT",94:"DYNAMIC_BLOCK",95:"BLOCK_B",96:"GLOW_DISABLED",97:"ROTATION_SPEED",98:"DISABLE_ROTATION",100:"USE_TARGET",101:"TARGET_POS_AXES",102:"EDITOR_DISABLE",103:"HIGH_DETAIL",104:"COUNT_MULTI_ACTIVATE",105:"MAX_SPEED",106:"RANDOMIZE_START",107:"ANIMATION_SPEED",108:"LINKED_GROUP"},unavailable_g=1,unavailable_c=1,unavailable_b=0,unknown_g=()=>(unavailable_g++,group(unavailable_g)),unknown_c=()=>color(++unavailable_c),unknown_b=()=>block(++unavailable_b),contexts={global:{name:"global",group:unknown_g(),objects:[]}},last_context_children={},current_context="global",set_context=t=>{current_context=t},get_context=()=>contexts[current_context],create_context=(t,e=!1)=>(contexts[t]={name:t,group:unknown_g(),objects:[]},last_contexts[t]=t,e&&set_context(t),contexts[t]),trigger_function=(t,e=!0)=>{let _=current_context,o=create_context(crypto.randomUUID(),!0);return t(o.group),set_context(_),o.group},add_to_context=t=>{get_context().objects.push(t)},reverse={};for(var i in d)reverse[d[i]]=i;let levelstring_to_obj=t=>{let e=[];return t.split(";").slice(0,-1).forEach(t=>{let _={},o=t.split(",");o.forEach((t,e)=>{e%2==0?_[d[t]]=null:(t.includes(".")&&(t=t.split(".")),"string"!=typeof t||isNaN(parseInt(t))||(t=parseInt(t)),"object"!=typeof t||t.filter(t=>isNaN(parseInt(t))).length||(t=t.map(t=>parseInt(t))),"boolean"==typeof t&&(t=+t),_[d[o[e-1]]]=t)}),e.push(_)}),e},obj_to_levelstring=t=>{let e="";for(var _ in t){let o=t[_],n=reverse[_];if("boolean"==typeof o&&(o=+o),explicit[_]&&!o.value){if("object"!=typeof o||"57"!=n)throw`Expected type "${explicit[d[parseInt(n)]]}", got "${typeof o}"`;o=o.map(t=>t.value).filter(t=>t&&""!=t).join(".")}else if(explicit[_]&&o.value){if(o.type!=explicit[_])throw`Expected type "${explicit[_]}", got "${o.type}"`;o=o.value}"696969"==n&&(n="80"),e+=`${n},${o},`}return e.slice(0,-1)+";"},arr_to_levelstring=t=>{let e="";return t.forEach(t=>e+=obj_to_levelstring(t)),e},resulting="",add=t=>{let e=t;e.with&&delete e.with,add_to_context(e)},remove_group=1e3,prep_lvl=()=>{let t="GLOBAL_FULL";contexts[t]={name:t,group:group(0),objects:[]},last_contexts[t]=t,set_context(t),contexts.global.group.call();for(let e in contexts){if("GLOBAL_FULL"!==e){let t=contexts[e],_=t.objects;for(let e=0;e<_.length;e++){let o=_[e];o.GROUPS?Array.isArray(o.GROUPS)?o.GROUPS.push(t.group,group(remove_group)):o.GROUPS=[o.GROUPS,t.group,group(remove_group)]:o.GROUPS=[t.group,group(remove_group)],o.SPAWN_TRIGGERED=1,o.MULTI_TRIGGER=1}}else{let e=contexts[t].objects;for(let t=0;t<e.length;t++){let _=e[t];_.GROUPS?Array.isArray(_.GROUPS)?_.GROUPS.push(group(remove_group)):_.GROUPS=[_.GROUPS,group(remove_group)]:_.GROUPS=group(remove_group)}}for(let t in contexts[e].objects){let _=obj_to_levelstring(contexts[e].objects[t]);resulting+=_}}},getLevelString=(t={})=>{if(prep_lvl(),unavailable_g<=999)t.info&&(console.log("Finished, result stats:"),console.log("Object count:",resulting.split(";").length-1),console.log("Group count:",unavailable_g));else if(t.hasOwnProperty("object_count_warning")&&1==t.object_count_warning||!t.hasOwnProperty("object_count_warning"))throw`Group count surpasses the limit! (${unavailable_g}/999)`;return resulting},exportLevel=()=>(prep_lvl(),encode_level(resulting)),easings={ELASTIC_OUT:6,BACK_IN_OUT:16,BOUNCE_IN:8,BACK_OUT:18,EASE_OUT:3,EASE_IN:2,EASE_IN_OUT:1,ELASTIC_IN_OUT:4,BOUNCE_OUT:9,EXPONENTIAL_IN:11,EXPONENTIAL_OUT:12,SINE_IN_OUT:13,BOUNCE_IN_OUT:7,SINE_IN:14,ELASTIC_IN:5,SINE_OUT:15,EXPONENTIAL_IN_OUT:10,BACK_IN:17,NONE:0};extract(easings),global.obj_props=reverse;let last_contexts={},extend_trigger_func=(t,e)=>{for(let _ in contexts)if((_=contexts[_]).group==t){let t=current_context;set_context(last_contexts[_.name]),e(_.group),set_context(t)}},$={add:add,print:function(){console.log(...Array.from(arguments))},getLevelString:getLevelString,arr_to_levelstring:arr_to_levelstring,obj_to_levelstring:obj_to_levelstring,levelstring_to_obj:levelstring_to_obj,extend_trigger_func:extend_trigger_func},move_trigger=(t,e,_)=>{let o={OBJ_ID:901,TARGET:t,MOVE_X:3*e,MOVE_Y:3*_,with:(t,e)=>(o[d[t]]=e,o)};return o},color_trigger=(t,e,_,o,n=0,r=1,l=!1)=>{let a={OBJ_ID:899,DURATION:n,TRIGGER_RED:e,TRIGGER_GREEN:_,TRIGGER_BLUE:o,OPACITY:r,BLENDING:l,TARGET_COLOR:t,with:(t,e)=>(a[d[t]]=e,a)};return a};const range=(t,e,_)=>{t>0&&t--,e>0&&e--;var o=[],n=typeof t,r=typeof e;if(0===_)throw TypeError("Step cannot be zero.");if("undefined"==n||"undefined"==r)throw TypeError("Must pass start and end arguments.");if(n!=r)throw TypeError("Start and end arguments must be of same type.");if(void 0===_&&(_=1),e<t&&(_=-_),"number"==n)for(;_>0?e>=t:e<=t;)o.push(t),t+=_;else{if("string"!=n)throw TypeError("Only string and number types are supported");if(1!=t.length||1!=e.length)throw TypeError("Only strings with one character are supported.");for(t=t.charCodeAt(0),e=e.charCodeAt(0);_>0?e>=t:e<=t;)o.push(String.fromCharCode(t)),t+=_}return o};let wait=t=>{let e=crypto.randomUUID(),_=current_context,o=create_context(e);$.add(spawn_trigger(o.group,t)),get_context().linked_to?(o.linked_to=get_context().linked_to,last_context_children[o.linked_to]=e):(o.linked_to=_,last_contexts[_]=o.name,last_context_children[_]=e),set_context(e)},next_free=0,counter=(t=0,e=16)=>{let _=next_free++;t>0&&$.add({OBJ_ID:1817,COUNT:t,ITEM:_});let o={item:_,bits:e,add:t=>{"number"==typeof t?$.add({OBJ_ID:1817,COUNT:t,ITEM:_}):"object"==typeof t&&t.copy_to(o)},subtract:t=>{"number"==typeof t?$.add({OBJ_ID:1817,COUNT:-t,ITEM:_}):"object"==typeof t&&t.copy_to(o)},display:(t,e)=>$.add({OBJ_ID:1615,X:t,Y:e,ITEM:_,COLOR:color(1)}),if_is:(t,e,o)=>{$.add({OBJ_ID:1811,TARGET:o,COUNT:e,ACTIVATE_GROUP:!0,COMPARISON:t,ITEM:_})},to_const:(t,e)=>{let _=current_context;for(let n in t){n=t[n];let r=crypto.randomUUID(),l=create_context(r,!0);e(n),set_context(_),o.if_is(EQUAL_TO,n,l.group)}},add_to:(t,e=1)=>{while_loop(greater_than(o,0),()=>{o.subtract(1),t.add(1)})},copy_to:(t,e=1)=>{temp_storage=counter(0,o.bits);let _=range(o.bits,0);for(let n in _){n=_[n],x=2**n;let r=trigger_function(()=>{o.subtract(x),temp_storage.add(x),t.add(x*e)});o.if_is(LARGER_THAN,x,r),o.if_is(EQUAL_TO,x,r)}temp_storage.add_to(o)},clone:()=>{let t=counter(0,o.bits);return o.copy_to(t),t},subtract_from:t=>{let e=o;while_loop(greater_than(e,0),()=>{e.subtract(1),t.subtract(1)})},compare:(t,e)=>{comp=counter(0,Math.max(o.bits,t.bits)),o.copy_to(comp),t.copy_to(comp,-1),o.if_is(SMALLER_THAN,0,trigger_function(()=>{e(-1)})),o.if_is(EQUAL_TO,0,trigger_function(()=>{e(0)})),o.if_is(LARGER_THAN,0,trigger_function(()=>{e(1)}))},reset:()=>{while_loop(greater_than(o,0),()=>{o.subtract(1)})},multiply:t=>{if("number"==typeof t)temp=counter(0,o.bits),o.add_to(temp,t),temp.add_to(o);else if("object"==typeof t){let e=o.clone();while_loop(t,LARGER_THAN,1,()=>{e.copy_to(o),t.subtract(1)})}},multiply_neg:t=>{"number"==typeof t?(temp=counter(0,o.bits),o.add_to(temp,t),temp.add_to(o)):"object"==typeof t&&(t=t.clone(),while_loop(t,SMALLER_THAN,-1,()=>{o.clone().add_to(o),t.add(1)}))}};return o},toggle_on_trigger=t=>({OBJ_ID:1049,TARGET:t,ACTIVATE_GROUP:!0}),toggle_off_trigger=t=>({OBJ_ID:1049,TARGET:t,ACTIVATE_GROUP:!1}),on=(t,e)=>{t.event(e)},touch=(t=!1)=>({event:e=>$.add({OBJ_ID:1595,HOLD_MODE:!0,TOGGLE_MODE:1,TARGET:e,DUAL_MODE:t})}),touch_end=(t=!1)=>({event:e=>$.add({OBJ_ID:1595,HOLD_MODE:!0,TOGGLE_MODE:2,TARGET:e,DUAL_MODE:t})}),collision=(t,e)=>({event:_=>$.add({OBJ_ID:1815,BLOCK_A:t,BLOCK_B:e,ACTIVATE_GROUP:!0,ACTIVATE_ON_EXIT:!1,TARGET:_})}),collision_exit=(t,e)=>({event:_=>$.add({OBJ_ID:1815,BLOCK_A:t,BLOCK_B:e,ACTIVATE_GROUP:!0,ACTIVATE_ON_EXIT:!0,TARGET:_})}),death=()=>({event:t=>$.add({OBJ_ID:1812,ACTIVATE_GROUP:!0,TARGET:t})}),count=(t,e,_=!0)=>({event:o=>{$.add({OBJ_ID:1611,ACTIVATE_GROUP:!0,TARGET:o,ITEM:t,COUNT:e,COUNT_MULTI_ACTIVATE:_})}}),x_position=t=>({event:e=>$.add(spawn_trigger(e).with(X,t).with(Y,2145))});String.prototype.to_obj=function(){let t={OBJ_ID:914,TEXT:btoa(this),with:(e,_)=>(t[d[e]]=_,t)};return t};let greater_than=(t,e)=>({count:t,comparison:LARGER_THAN,other:e}),equal_to=(t,e)=>({count:t,comparison:EQUAL_TO,other:e}),less_than=(t,e)=>({count:t,comparison:SMALLER_THAN,other:e}),while_loop=(t,e,_=.05)=>{let{count:o,comparison:n,other:r}=t,l=current_context,a=create_context(crypto.randomUUID());o.if_is(n,r,a.group),set_context(a.name),e(a.group),set_context(l),e=a.group;let i=find_context(e).name,c=contexts[last_context_children[i]];c=c?c.group:e,$.extend_trigger_func(c,()=>{contexts[l].group.call(_)})},hide_player=()=>{$.add({OBJ_ID:1612})},gamescene=()=>(follow_x_group=unknown_g(),follow_y_group=unknown_g(),hidden_group=unknown_g(),hidden_group.alpha(0),follow_x_group.lock_to_player(lock_x=!0,lock_y=!1),follow_x_group.move(x=0,y=5,duration=.01),follow_y_group.follow_player_y(),hide_player(),$.add({OBJ_ID:obj_ids.portals.DUAL_ON,X:0,Y:30,GROUPS:hidden_group}),$.add({OBJ_ID:obj_ids.portals.WAVE,X:0,Y:30,GROUPS:hidden_group}),$.add({OBJ_ID:obj_ids.portals.SIZE_MINI,X:0,Y:30,GROUPS:hidden_group}),$.add({OBJ_ID:1,X:0,Y:33,GROUPS:[hidden_group,follow_x_group]}),$.add({OBJ_ID:1,X:0,Y:-12,GROUPS:[hidden_group,follow_x_group]}),player_block=unknown_b(),collide_block=unknown_b(),$.add({OBJ_ID:obj_ids.special.COLLISION_BLOCK,DYNAMIC_BLOCK:!0,BLOCK_A:player_block,X:0,Y:0,GROUPS:[hidden_group,follow_x_group,follow_y_group]}),$.add({OBJ_ID:obj_ids.special.COLLISION_BLOCK,DYNAMIC_BLOCK:!1,BLOCK_A:collide_block,X:0,Y:37,GROUPS:[hidden_group,follow_x_group]}),$.add({OBJ_ID:obj_ids.special.D_BLOCK,SCALING:2,X:0,Y:15,GROUPS:[hidden_group,follow_x_group]}),{button_a:()=>collision(player_block,collide_block),button_b:()=>touch(!0),button_a_end:()=>collision_exit(player_block,collide_block),button_b_end:()=>touch_end(!0),hidden_group:hidden_group}),obj_ids={special:{USER_COIN:1329,H_BLOCK:1859,J_BLOCK:1813,TEXT:914,S_BLOCK:1829,ITEM_DISPLAY:1615,D_BLOCK:1755,COLLISION_BLOCK:1816},triggers:{SPAWN:1268,ON_DEATH:1812,ROTATE:1346,COUNT:1611,DISABLE_TRAIL:33,HIDE:1612,PICKUP:1817,COLLISION:1815,ENABLE_TRAIL:32,ANIMATE:1585,TOUCH:1595,INSTANT_COUNT:1811,BG_EFFECT_OFF:1819,TOGGLE:1049,MOVE:901,ALPHA:1007,SHOW:1613,STOP:1616,FOLLOW:1347,PULSE:1006,BG_EFFECT_ON:1818,SHAKE:1520,FOLLOW_PLAYER_Y:1814,COLOR:899},portals:{SPEED_GREEN:202,TELEPORT:747,CUBE:12,MIRROR_OFF:46,WAVE:660,SPIDER:1331,SPEED_RED:1334,GRAVITY_DOWN:10,SPEED_BLUE:201,UFO:111,ROBOT:745,MIRROR_ON:45,GRAVITY_UP:11,DUAL_ON:286,SIZE_MINI:101,BALL:47,SIZE_NORMAL:99,SHIP:13,SPEED_PINK:203,SPEED_YELLOW:200,DUAL_OFF:287}},exps={EQUAL_TO:0,LARGER_THAN:1,SMALLER_THAN:2,$:$,counter:counter,spawn_trigger:spawn_trigger,color_trigger:color_trigger,move_trigger:move_trigger,trigger_function:trigger_function,on:on,touch:touch,touch_end:touch_end,touch_end:touch_end,collision:collision,collision_exit:collision_exit,death:death,count:count,x_position:x_position,wait:wait,range:range,get_context:get_context,extract:extract,while_loop:while_loop,obj_ids:obj_ids,find_context:find_context,greater_than:greater_than,equal_to:equal_to,less_than:less_than,unknown_g:unknown_g,unknown_c:unknown_c,unknown_b:unknown_b,toggle_on_trigger:toggle_on_trigger,toggle_off_trigger:toggle_off_trigger,hide_player:hide_player,gamescene:gamescene,rgb:(t,e,_)=>[t,e,_]};extract(exps)}(this);
